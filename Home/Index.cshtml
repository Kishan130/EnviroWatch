@{
    ViewData["Title"] = "Dashboard";
}

<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-md-12">
            <h1 class="display-4">Air Quality & Weather Dashboard</h1>
            <p class="lead">Real-time monitoring of Indian districts</p>
        </div>
    </div>

    <!-- District Selector -->
    <div class="row mb-4">
        <div class="col-md-6">
            <label for="districtSelect" class="form-label">
                <strong>Select District:</strong>
            </label>
            <select id="districtSelect" class="form-select form-select-lg">
                <option value="">-- Choose a district --</option>
                @foreach (var district in ViewBag.Districts)
                {
                    <option value="@district.DistrictId">
                        @district.DistrictName, @district.StateName
                    </option>
                }
            </select>
        </div>
        <div class="col-md-6 d-flex align-items-end">
            <button id="btnRefresh" class="btn btn-success btn-lg">
                🔄 Refresh Data
            </button>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading" class="text-center my-5" style="display:none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">Fetching data...</p>
    </div>

    <!-- Data Display Section -->
    <div id="dataSection" style="display:none;">
        <!-- Current Data Cards -->
        <div class="row mb-4">
            <!-- Weather Card -->
            <div class="col-md-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-info text-white">
                        <h5>☀️ Current Weather</h5>
                    </div>
                    <div class="card-body">
                        <div id="weatherData">
                            <p class="mb-2">
                                <strong>Temperature:</strong>
                                <span id="temp">--</span>°C
                            </p>
                            <p class="mb-2">
                                <strong>Humidity:</strong>
                                <span id="humidity">--</span>%
                            </p>
                            <p class="mb-2">
                                <strong>Wind Speed:</strong>
                                <span id="windSpeed">--</span> m/s
                            </p>
                            <p class="mb-0">
                                <strong>Condition:</strong>
                                <span id="condition">--</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AQI Card -->
            <div class="col-md-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-warning text-dark">
                        <h5>🏭 Air Quality Index (AQI)</h5>
                    </div>
                    <div class="card-body">
                        <div id="aqiData">
                            <h2 class="mb-3">
                                <span id="aqiValue" class="badge">--</span>
                            </h2>
                            <p class="mb-2">
                                <strong>Category:</strong>
                                <span id="aqiCategory">--</span>
                            </p>
                            <p class="mb-2">
                                <strong>PM2.5:</strong>
                                <span id="pm25">--</span> μg/m³
                            </p>
                            <p class="mb-0">
                                <strong>PM10:</strong>
                                <span id="pm10">--</span> μg/m³
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-secondary text-white">
                        <h5>7-Day Temperature Trend</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="tempChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-danger text-white">
                        <h5>7-Day AQI Trend</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="aqiChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/dashboard.js"></script>
}
